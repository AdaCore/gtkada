SRC=gtkplot.c gtkplotcanvas.c gtkplotprint.c gtkplotps.c \
  gtkpsfont.c gtkplotpc.c gtksheet.c gtkitementry.c \
  gtkextra-marshal.c gtkextra.c gtkplotdt.c \
  gtkcombobox.c gtkcolorcombo.c gtkbordercombo.c gtkfontcombo.c gtkplotgdk.c \
  gtkplotdata.c gtkplot3d.c gtkplotpolar.c gtkplotbar.c gtkplotbox.c \
  gtkplotsurface.c

OBJ=${SRC:%.c=%.o}
CC=@CC@
FPIC=@FPIC@
CFLAGS=@CFLAGS@
ALL_CFLAGS=$(CFLAGS) @GTK_CFLAGS@ $(FPIC)

all: gtkextra-marshal.h gtkextra-marshal.c $(OBJ)

%.o: %.c %.h
	$(CC) -c $(ALL_CFLAGS) $<

gtkextra-marshal.h: gtkextra-marshal.list
	glib-genmarshal --prefix=gtkextra --header $< > $@

gtkextra-marshal.c: gtkextra-marshal.list
	glib-genmarshal --prefix=gtkextra --body $< > $@

clean:
	-$(RM) $(OBJ)
	-$(RM) gtkextra-marshal.[ch]

distclean: clean
	-$(RM) Makefile
