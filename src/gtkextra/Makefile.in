SRC=gtkplot.c gtkplotcanvas.c gtkplotprint.c gtkplotps.c \
  gtkpsfont.c gtkplotpc.c gtksheet.c gtkitementry.c \
  gtkcombobox.c gtkextra-marshall.o gtkcolorcombo.c gtkbordercombo.c \
  gtkfontcombo.c gtkplotgdk.c gtkextra.c gtkplotdt.c \
  gtkplotdata.c gtkplot3d.c gtkplotpolar.c gtkplotbar.c gtkplotbox.c gtkplotsurface.c

OBJ=${SRC:%.c=%.o}
CC=@CC@
FPIC=@FPIC@
CFLAGS=@CFLAGS@
ALL_CFLAGS=$(CFLAGS) @GTK_CFLAGS@ $(FPIC)

all: gtkextramarshal.h gtkextramarshal.c $(OBJ)

%.o: %.c %.h
	$(CC) -c $(ALL_CFLAGS) $<

gtkextramarshal.h: gtkextra.list
	glib-genmarshal --prefix=gtk_extra_marshal --header $< > gtkextramarshal.h

gtkextramarshal.c: gtkextra.list
	glib-genmarshal --prefix=gtk_extra_marshal --body $< > gtkextramarshal.c

clean:
	-$(RM) $(OBJ)
	-$(RM) gtkextramarshal.[ch]

distclean: clean
	-$(RM) Makefile
