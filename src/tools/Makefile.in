GATE_SRC      = gate.adb
GATE_EX       = gate-in.exe

ifeq ($(OS),Windows_NT)
  GATE        = gate.bat
else
  GATE        = gate
endif

GDIALOG       = gtkada-dialog
GTKADA_CONFIG = gtkada-config

GNATMAKELDFLAGS = -largs -L../lib-obj -lgtkada $(GTK_LIBS)

OBJ_DIR=obj
include ../Makefile.common

## These cannot be shared in Makefile.common, since relative paths might be
## generated for configure (../install-sh), or absolute paths (/usr/bin/install)
INSTALL         = @INSTALL@
INSTALL_DATA    = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT  = @INSTALL_SCRIPT@

all: force
	${GNATMAKE} -Ptools ${GPR_BUILD} ${GNATMAKELDFLAGS}

install: force
	-${CHMOD} +x ${GATE} ${GTKADA_CONFIG}
	${INSTALL_SCRIPT} ${GATE} ${bindir}
	${INSTALL_SCRIPT} ${GTKADA_CONFIG} ${bindir}
	${INSTALL_PROGRAM} ${OBJ_DIR}/${GATE_EX} ${bindir}
	${INSTALL_PROGRAM} ${OBJ_DIR}/${GDIALOG} ${bindir}

clean: module_clean

distclean: module_distclean
	-${RM} gate ${GTKADA_CONFIG}
