SHELL=/bin/sh

.SUFFIXES:
.PHONY: clean-generic mostlyclean-generic \
	clean distclean mostlyclean maintainer-clean \
	install src tests

src_dir     = src
testgtk_dir = testgtk
doc_dir     = docs
example_dir = examples
projects_dir = projects
xml_dir      = xml

all: src tests

src:
	$(MAKE) -C $(src_dir)

tests:
	$(MAKE) -C $(testgtk_dir)

install: src
	$(MAKE) -C $(src_dir) install
	$(MAKE) -C $(projects_dir) install
	$(MAKE) -C $(testgtk_dir) install
	$(MAKE) -C $(doc_dir) install
	$(MAKE) -C $(example_dir) install
	$(MAKE) -C $(xml_dir) install
	@echo '------------------------------------------------------------------'
	@echo '--  GtkAda has now been installed.                              --'
	@echo '--  To be able to use the library, you may need to update your  --'
	@echo '--  LD_LIBRARY_PATH or to run ldconfig. You may also need to    --'
	@echo '--  update your PATH to include gtkada-config in it.            --'
	@echo '------------------------------------------------------------------'

clean-generic:
	-${RM} core
	-${RM} .\#*

mostlyclean-generic: clean-generic
	-${RM} Makefile

clean: clean-generic
	-$(MAKE) -C $(src_dir) clean
	-$(MAKE) -C $(testgtk_dir) clean
	-$(MAKE) -C $(example_dir) clean

distclean: mostlyclean-generic
	-${RM} config.cache config.log config.status
	-$(MAKE) -C $(src_dir) distclean
	-$(MAKE) -C $(testgtk_dir) distclean

mostlyclean: mostlyclean-generic
	-$(MAKE) -C $(src_dir) mostlyclean
	-$(MAKE) -C $(testgtk_dir) mostlyclean

maintainer-clean: mostlyclean-generic
	-${RM} config.cache config.log config.status
	-${RM} configure
	-$(MAKE) -C $(src_dir) maintainer-clean
	-$(MAKE) -C $(testgtk_dir) maintainer-clean
