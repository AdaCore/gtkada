2006-10-06  Arnaud Charlet  <charlet@adacore.com>

	* examples/Makefile.in: Work around wrong dependency when freetype is
	not available (e.g. under Windows).

Mon Mar 13 2006  Arnaud Charlet  <charlet@adacore.com>

	* modules/Makefile.in: work around cygwin limitation.

Fri Jun 17 2005  Arnaud Charlet  <charlet@adacore.com>

	* pango/pangowin32-fontmap.c: integrate patch from
	http://bugzilla.gnome.org/show_bug.cgi?id=110521
	Fix E607-006

--- pango/pangowin32-fontmap.c.old	2006-02-27 08:32:44.000000000 +0100
+++ pango/pangowin32-fontmap.c	2006-02-27 08:34:50.000000000 +0100
@@ -133,7 +133,21 @@ pango_win32_inner_enum_proc (LOGFONT    
    * Asian fonts with @ prepended to their name, ignore them.
    */
   if (lfp->lfFaceName[0] != '@')
-    pango_win32_insert_font (win32fontmap, lfp);
+    {
+      /* Bold and italic variants can always (?) be simulated,
+       * so insert them.
+       */
+      lfp->lfItalic = 0;
+      lfp->lfWeight = FW_NORMAL;
+      pango_win32_insert_font (win32fontmap, lfp); /* normal */
+      lfp->lfItalic = 1;
+      pango_win32_insert_font (win32fontmap, lfp); /* italic */
+      lfp->lfItalic = 0;
+      lfp->lfWeight = FW_BOLD;
+      pango_win32_insert_font (win32fontmap, lfp); /* bold */
+      lfp->lfItalic = 1;
+      pango_win32_insert_font (win32fontmap, lfp); /* bold+italic */
+    }
 
   return 1;
 }
--- modules/Makefile.in.old	2006-03-13 12:37:32.642092800 +0100
+++ modules/Makefile.in	2006-03-13 12:38:25.648312000 +0100
@@ -606,10 +606,10 @@ uninstall-info: uninstall-info-recursive
 install-data-local: $(top_builddir)/pango/pango-querymodules
 	@if $(RUN_QUERY_MODULES_TEST) ; then 				\
 	  echo $(mkinstalldirs) $(DESTDIR)$(sysconfdir)/pango \&\& 	\
-	  $(top_builddir)/pango/pango-querymodules 			\
+	  $(top_builddir)/pango/pango-querymodules. 			\
 		\> $(DESTDIR)$(sysconfdir)/pango/pango.modules ;	\
 	  $(mkinstalldirs) $(DESTDIR)$(sysconfdir)/pango && 		\
-	  $(top_builddir)/pango/pango-querymodules 			\
+	  $(top_builddir)/pango/pango-querymodules. 			\
 		> $(DESTDIR)$(sysconfdir)/pango/pango.modules ;		\
 	else								\
 	  echo "***" ; 							\
@@ -626,7 +626,7 @@ uninstall-local:
 pango.modules: $(top_builddir)/pango/pango-querymodules $(SUBDIRS)
 	@if find . -name '*.so' | grep 'so' > /dev/null ; then \
           echo "Writing a pango.modules file to use with tests/examples."; \
-          $(top_builddir)/pango/pango-querymodules `find . -name '*.la' | grep -v '\.libs' | grep -v libpango` > $@ ;\
+          $(top_builddir)/pango/pango-querymodules. `find . -name '*.la' | grep -v '\.libs' | grep -v libpango` > $@ ;\
 	else \
           echo "No dynamic modules found; will use only static modules for tests/examples."; \
 	  touch $@; \
--- examples/Makefile.in.old	2006-09-16 00:22:23.000000000 +0200
+++ examples/Makefile.in	2006-10-06 12:07:16.421875000 +0200
@@ -111,7 +111,6 @@ am__cairosimple_SOURCES_DIST = cairosimp
 cairosimple_OBJECTS = $(am_cairosimple_OBJECTS)
 am__DEPENDENCIES_1 =
 @HAVE_CAIRO_PNG_TRUE@cairosimple_DEPENDENCIES = ../pango/libpango-$(PANGO_API_VERSION).la \
-@HAVE_CAIRO_PNG_TRUE@	../pango/libpangoft2-$(PANGO_API_VERSION).la \
 @HAVE_CAIRO_PNG_TRUE@	../pango/libpangocairo-$(PANGO_API_VERSION).la \
 @HAVE_CAIRO_PNG_TRUE@	$(am__DEPENDENCIES_1) \
 @HAVE_CAIRO_PNG_TRUE@	$(am__DEPENDENCIES_1)
@@ -576,7 +575,6 @@ INCLUDES = \
 
 @HAVE_CAIRO_PNG_TRUE@cairosimple_LDADD = \
 @HAVE_CAIRO_PNG_TRUE@	../pango/libpango-$(PANGO_API_VERSION).la	\
-@HAVE_CAIRO_PNG_TRUE@	../pango/libpangoft2-$(PANGO_API_VERSION).la	\
 @HAVE_CAIRO_PNG_TRUE@	../pango/libpangocairo-$(PANGO_API_VERSION).la	\
 @HAVE_CAIRO_PNG_TRUE@	$(GLIB_LIBS)					\
 @HAVE_CAIRO_PNG_TRUE@	$(CAIRO_LIBS)
